<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .news-card { border: 1px solid #ccc; margin: 10px 0; padding: 15px; }
        .test-section { margin: 20px 0; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>

    <div class="test-section">
        <h2>1. åŸºæœ¬è¦ç´ ãƒ†ã‚¹ãƒˆ</h2>
        <div id="newsGrid">è¨˜äº‹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        <div id="topNews">ãƒˆãƒƒãƒ—ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
    </div>

    <div class="test-section">
        <h2>2. ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</button>
        <div id="testOutput"></div>
    </div>

    <div class="test-section">
        <h2>3. APIæ¥ç¶šãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testAPI()">APIæ¥ç¶šç¢ºèª</button>
        <div id="apiOutput"></div>
    </div>

    <script>
        console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');

        // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
        function testDemoData() {
            console.log('ğŸ“¦ ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆé–‹å§‹');

            const demoData = [
                {
                    id: 'test1',
                    title: 'ãƒ†ã‚¹ãƒˆè¨˜äº‹1',
                    content: 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆè¨˜äº‹ã§ã™ã€‚',
                    isBreaking: false
                },
                {
                    id: 'test2',
                    title: 'ãƒ†ã‚¹ãƒˆè¨˜äº‹2ï¼ˆé€Ÿå ±ï¼‰',
                    content: 'ã“ã‚Œã¯é€Ÿå ±ã®ãƒ†ã‚¹ãƒˆè¨˜äº‹ã§ã™ã€‚',
                    isBreaking: true
                }
            ];

            // newsGridã«è¡¨ç¤º
            const newsGrid = document.getElementById('newsGrid');
            const regularNews = demoData.filter(item => !item.isBreaking);

            if (regularNews.length > 0) {
                newsGrid.innerHTML = regularNews.map(item => `
                    <div class="news-card">
                        <h3>${item.title}</h3>
                        <p>${item.content}</p>
                    </div>
                `).join('');
                console.log('âœ… é€šå¸¸ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºå®Œäº†:', regularNews.length + 'ä»¶');
            }

            // topNewsã«è¡¨ç¤º
            const topNews = document.getElementById('topNews');
            topNews.innerHTML = demoData.map(item => `
                <div class="news-card">
                    <h3>${item.title} ${item.isBreaking ? 'ã€é€Ÿå ±ã€‘' : ''}</h3>
                    <p>${item.content}</p>
                </div>
            `).join('');
            console.log('âœ… ãƒˆãƒƒãƒ—ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºå®Œäº†:', demoData.length + 'ä»¶');

            document.getElementById('testOutput').innerHTML = '<p style="color: green;">âœ… ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæˆåŠŸï¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>';
        }

        // APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
        async function testAPI() {
            console.log('ğŸŒ APIæ¥ç¶šãƒ†ã‚¹ãƒˆé–‹å§‹');
            const output = document.getElementById('apiOutput');

            try {
                const response = await fetch('/api/articles');
                if (response.ok) {
                    const articles = await response.json();
                    console.log('âœ… APIæ¥ç¶šæˆåŠŸ:', articles);
                    output.innerHTML = `<p style="color: green;">âœ… APIæ¥ç¶šæˆåŠŸï¼è¨˜äº‹æ•°: ${articles.length}ä»¶</p><pre>${JSON.stringify(articles, null, 2)}</pre>`;
                } else {
                    console.error('âŒ APIå¿œç­”ã‚¨ãƒ©ãƒ¼:', response.status);
                    output.innerHTML = `<p style="color: red;">âŒ APIå¿œç­”ã‚¨ãƒ©ãƒ¼: ${response.status}</p>`;
                }
            } catch (error) {
                console.error('âŒ APIæ¥ç¶šã‚¨ãƒ©ãƒ¼:', error);
                output.innerHTML = `<p style="color: red;">âŒ APIæ¥ç¶šã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
            }
        }

        // è‡ªå‹•å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸DOMContentLoaded');

            // åŸºæœ¬è¦ç´ ç¢ºèª
            const newsGrid = document.getElementById('newsGrid');
            const topNews = document.getElementById('topNews');

            console.log('ğŸ“‹ è¦ç´ ç¢ºèª:', {
                newsGrid: !!newsGrid,
                topNews: !!topNews
            });
        });
    </script>
</body>
</html>