<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momotaro Adventure - Extended English Gamebook</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXXX" 
            crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Hiragino Sans', '„Éí„É©„ÇÆ„ÉéËßí„Ç¥„Ç∑„ÉÉ„ÇØ', 'Yu Gothic Medium', 'Ê∏∏„Ç¥„Ç∑„ÉÉ„ÇØ Medium', YuGothic, 'Ê∏∏„Ç¥„Ç∑„ÉÉ„ÇØ‰Ωì', 'Meiryo', Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        .story-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(255, 255, 255, 0.2) inset;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .story-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            border-radius: 22px;
            z-index: -1;
            opacity: 0.1;
        }
        .choices {
            margin-top: 20px;
        }
        .choice-button {
            display: block;
            width: 100%;
            padding: 18px 25px;
            margin: 12px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            text-align: left;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .choice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .choice-button:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(102, 126, 234, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .choice-button:hover::before {
            left: 100%;
        }
        
        .choice-button:active {
            transform: translateY(0);
            transition: transform 0.1s;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(255, 255, 255, 0.2);
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            0% { filter: drop-shadow(0 0 5px rgba(255, 107, 107, 0.5)); }
            50% { filter: drop-shadow(0 0 20px rgba(78, 205, 196, 0.5)); }
            100% { filter: drop-shadow(0 0 5px rgba(69, 183, 209, 0.5)); }
        }
        .story-text {
            font-size: 18px;
            line-height: 1.8;
            color: #2c3e50;
            background: rgba(248, 249, 250, 0.8);
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .story-text::before {
            content: 'üìñ';
            position: absolute;
            top: -10px;
            left: 20px;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 20px;
        }
        .hidden {
            display: none;
        }
        .restart-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            margin-top: 20px;
        }
        .restart-btn:hover {
            box-shadow: 
                0 8px 25px rgba(76, 175, 80, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .home-btn {
            background: linear-gradient(135deg, #ff7675 0%, #d63031 100%);
            margin-top: 10px;
        }
        .home-btn:hover {
            box-shadow: 
                0 8px 25px rgba(255, 118, 117, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 25px 0;
            overflow: hidden;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1) inset,
                0 1px 2px rgba(255, 255, 255, 0.3);
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255, 255, 255, 0.5) 50%, 
                transparent 70%);
            animation: progressShine 3s infinite;
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }
        .scene-counter {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 25px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: inline-block;
        }
        .audio-controls {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        .audio-btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 8px;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .audio-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .audio-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(23, 162, 184, 0.4);
        }
        
        .audio-btn:hover::before {
            width: 120%;
            height: 120%;
        }
        
        .audio-btn:active {
            transform: translateY(-1px);
        }
        
        .audio-btn.playing {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        .story-text p {
            margin: 10px 0;
            padding: 8px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .story-text p.reading {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 4px solid #f39c12;
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
            animation: readingPulse 0.5s ease-in-out;
        }
        
        @keyframes readingPulse {
            0% { transform: translateX(0) scale(1); }
            50% { transform: translateX(5px) scale(1.02); }
            100% { transform: translateX(5px) scale(1); }
        }
        
        .scene {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scene:not(.hidden) {
            opacity: 1;
            transform: translateY(0);
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }
        
        
        /* Navigation button styling */
        .nav-link {
            display: inline-block;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            text-decoration: none;
            color: white;
        }
        
        /* Choice audio button styling */
        .choice-container {
            display: flex;
            align-items: center;
            margin: 12px 0;
            gap: 10px;
        }
        
        .choice-button-main {
            flex: 1;
            display: block;
            padding: 18px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            text-align: left;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .choice-button-main::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .choice-button-main:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(102, 126, 234, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .choice-button-main:hover::before {
            left: 100%;
        }
        
        .choice-button-main:active {
            transform: translateY(0);
            transition: transform 0.1s;
        }
        
        .choice-audio-btn {
            width: 45px;
            height: 45px;
            padding: 0;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .choice-audio-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .choice-audio-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(23, 162, 184, 0.4);
        }
        
        .choice-audio-btn:hover::before {
            width: 100%;
            height: 100%;
        }
        
        .choice-audio-btn:active {
            transform: translateY(0) scale(1);
        }
        
        .choice-audio-btn.playing {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            animation: choicePulse 1.5s infinite;
        }
        
        @keyframes choicePulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 8px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        
        /* Translation display styling */
        .choice-explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 100%);
            border: 2px solid #4CAF50;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .choice-explanation::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 15px;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 18px;
            display: none;
        }
        
        .choice-explanation h3 {
            color: #2e7d32;
            margin: 0 0 20px 0;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.6;
            padding-top: 5px;
        }
        
        .positive-feedback {
            color: #2e7d32;
            font-weight: bold;
        }
        
        .negative-feedback {
            color: #d32f2f;
            font-weight: bold;
        }
        
        .choice-explanation h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            font-size: 20px;
            display: none;
        }
        
        .choice-display {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #4CAF50;
        }
        
        .choice-display .english-text {
            font-size: 16px;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .choice-display .japanese-text {
            font-size: 15px;
            color: #2e7d32;
            font-weight: 500;
        }
        
        .explanation-text {
            font-size: 14px;
            color: #424242;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.6);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #81c784;
        }

        /* Red theme for wrong choice explanations */
        .choice-explanation.wrong {
            background: linear-gradient(135deg, #fde8e8 0%, #ffebee 100%);
            border: 2px solid #dc3545;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .choice-explanation.wrong::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 15px;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 18px;
            display: none;
        }
        
        .choice-explanation.wrong h3 {
            color: #c62828;
            margin: 0 0 20px 0;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.6;
            padding-top: 5px;
        }
        
        .choice-explanation.wrong h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            font-size: 20px;
            display: none;
        }
        
        .choice-explanation.wrong .choice-display {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #dc3545;
        }
        
        .choice-explanation.wrong .choice-display .english-text {
            font-size: 16px;
            font-weight: 600;
            color: #1565c0;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .choice-explanation.wrong .choice-display .japanese-text {
            font-size: 15px;
            color: #c62828;
            font-weight: 500;
        }
        
        .choice-explanation.wrong .explanation-text {
            font-size: 14px;
            color: #424242;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.6);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #ef5350;
        }
        
        .section-divider {
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, #4CAF50 50%, transparent 100%);
            margin: 30px 0;
            position: relative;
        }
        
        .section-divider::after {
            content: 'üìñ';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 0 10px;
            font-size: 20px;
        }
        
        .mini-audio-btn {
            width: 30px;
            height: 30px;
            padding: 0;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(23, 162, 184, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .mini-audio-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.4);
        }
        
        .mini-audio-btn.playing {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            animation: miniPulse 1s infinite;
        }
        
        @keyframes miniPulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 5px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }

        /* Red theme mini audio button styles for wrong choices */
        .choice-explanation.wrong .mini-audio-btn {
            width: 30px;
            height: 30px;
            padding: 0;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
            flex-shrink: 0;
        }
        
        .choice-explanation.wrong .mini-audio-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
        }
        
        .choice-explanation.wrong .mini-audio-btn.playing {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
            animation: miniPulseRed 1s infinite;
        }
        
        @keyframes miniPulseRed {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
            70% { box-shadow: 0 0 0 5px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }
        
        /* Feedback text color classes */
        .positive-feedback {
            color: #2e7d32 !important;
            font-weight: 600;
        }
        
        .negative-feedback {
            color: #d32f2f !important;
            font-weight: 600;
        }
        
        /* AdSense „Çπ„Çø„Ç§„É™„É≥„Ç∞ */
        .adsense-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .adsense-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }
        
        /* AdSense „Çπ„Çø„Ç§„É™„É≥„Ç∞ */
        .adsense-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .adsense-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }
        
        /* Ââç„ÅÆÂïèÈ°åË°®Á§∫ */
        .previous-question {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
            margin-bottom: 20px;
        }
        
        .previous-question .english-text {
            font-size: 16px;
            color: #2e7d32;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .previous-question .japanese-text {
            font-size: 14px;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    
    <!-- Navigation -->
    <div style="text-align: left; margin-bottom: 20px;">
        <a href="index.html" class="nav-link">‚Üê „É´„Éº„É´Ë™¨Êòé„Å´Êàª„Çã</a>
    </div>
    
    <!-- AdSense Â∫ÉÂëä („Éò„ÉÉ„ÉÄ„Éº‰∏ã) -->
    <div class="adsense-container">
        <div class="adsense-label">Â∫ÉÂëä</div>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    
    <!-- Progress Bar -->
    <div style="text-align: center; margin: 20px 0;">
        <div class="scene-counter" id="scene-progress" style="margin-bottom: 8px;">Scene 1 of 25</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 4%;"></div>
        </div>
    </div>
    
    <div class="story-container">
        <!-- Scene 1: The Old Woman's Daily Life -->
        <div id="scene1" class="scene">
            <div class="story-text" data-scene="scene1">
                <p>Once upon a time, in a small village in Japan, there lived an old woman and her husband.</p>
                <p>Every day, the old woman went to the river to wash clothes. She worked very hard.</p>
                <p>One morning, she felt very tired. What should she do?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene1')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene2', 'Go to the river anyway to work')">Go to the river anyway to work</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Go to the river anyway to work')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene1', 'Stay home and rest all day')">Stay home and rest all day</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Stay home and rest all day')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene1', 'Ask someone else to do her work')">Ask someone else to do her work</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ask someone else to do her work')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 2: At the River -->
        <div id="scene2" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene2-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene2-previous-question"></div>
                    <div class="japanese-text" id="scene2-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene2-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene2')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene2-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene2-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene2-divider"></div>
            
            <div class="story-text" data-scene="scene2">
                <p><span class="positive-feedback">Good choice!</span> The old woman was hardworking and kind.</p>
                <p>At the river, she started washing clothes. The water was clear and cold.</p>
                <p>She sang a song while she worked to make herself happy.</p>
                <p>Then, she saw something floating in the water. What was it?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene2')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene3', 'A big, beautiful peach')">A big, beautiful peach</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A big, beautiful peach')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene2', 'A wooden box')">A wooden box</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A wooden box')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene2', 'A golden coin')">A golden coin</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A golden coin')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 3: Finding the Peach -->
        <div id="scene3" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene3-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene3-previous-question"></div>
                    <div class="japanese-text" id="scene3-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene3-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene3')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene3-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene3-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene3-divider"></div>
            
            <div class="story-text" data-scene="scene3">
                <p>Yes! It was a big, beautiful peach! It was the biggest peach she had ever seen!</p>
                <p>The peach was floating down the river. It looked delicious and perfect.</p>
                <p>"Oh my!" said the old woman. "What a wonderful peach!"</p>
                <p>What should she do with this amazing peach?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene3')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene4', 'Catch the peach and take it home')">Catch the peach and take it home</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Catch the peach and take it home')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene3', 'Let it float away')">Let it float away</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Let it float away')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene3', 'Eat it by the river')">Eat it by the river</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Eat it by the river')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 4: Bringing the Peach Home -->
        <div id="scene4" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene4-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene4-previous-question"></div>
                    <div class="japanese-text" id="scene4-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene4-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene4')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene4-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene4-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene4-divider"></div>
            
            <div class="story-text" data-scene="scene4">
                <p><span class="positive-feedback">Perfect!</span> The old woman carefully caught the peach and carried it home.</p>
                <p>The peach was heavy but she was happy. She couldn't wait to share it!</p>
                <p>When she got home, her husband was waiting for her.</p>
                <p>"Look what I found!" she said excitedly. How should she tell him about it?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene4')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene5', 'Tell him about the amazing peach she found')">Tell him about the amazing peach she found</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Tell him about the amazing peach she found')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene4', 'Keep it a secret and hide it')">Keep it a secret and hide it</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Keep it a secret and hide it')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene4', 'Give it to the neighbors instead')">Give it to the neighbors instead</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Give it to the neighbors instead')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 5: Sharing with Husband -->
        <div id="scene5" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene5-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene5-previous-question"></div>
                    <div class="japanese-text" id="scene5-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene5-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene5')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene5-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene5-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene5-divider"></div>
            
            <div class="story-text" data-scene="scene5">
                <p><span class="positive-feedback">Wonderful!</span> The old woman shared her discovery with her loving husband.</p>
                <p>"This is incredible!" said the old man. "I have never seen such a big peach!"</p>
                <p>They both looked at the peach. It smelled sweet and delicious.</p>
                <p>"Should we eat this beautiful peach together?" asked the old man.</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene5')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene6', 'Yes, let\'s eat it together')">Yes, let's eat it together</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Yes, let\'s eat it together')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene5', 'No, let\'s save it for later')">No, let's save it for later</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('No, let\'s save it for later')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene5', 'Let\'s sell it at the market')">Let's sell it at the market</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Let\'s sell it at the market')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 6: Cutting the Peach -->
        <div id="scene6" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene6-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene6-previous-question"></div>
                    <div class="japanese-text" id="scene6-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene6-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene6')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene6-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene6-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene6-divider"></div>
            
            <div class="story-text" data-scene="scene6">
                <p>Great idea! They decided to share the peach together.</p>
                <p>The old man got a big knife. He was very careful.</p>
                <p>As he started to cut the peach, something amazing happened!</p>
                <p>What do you think came out of the peach?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene6')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene7', 'A baby boy')">A baby boy</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A baby boy')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene6', 'Gold and jewels')">Gold and jewels</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Gold and jewels')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene6', 'A magical bird')">A magical bird</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A magical bird')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 7: Momotaro's Birth -->
        <div id="scene7" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene7-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene7-previous-question"></div>
                    <div class="japanese-text" id="scene7-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene7-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene7')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene7-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene7-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene7-divider"></div>
            
            <div class="story-text" data-scene="scene7">
                <p>Exactly! A healthy, beautiful baby boy came out of the peach!</p>
                <p>"Hello!" said the baby. "My name is Momotaro! I come from the peach!"</p>
                <p>The old man and woman were so surprised but very happy.</p>
                <p>How should they react to this miracle?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene7')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene8', 'Welcome him with joy and love')">Welcome him with joy and love</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Welcome him with joy and love')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene7', 'Be scared and run away')">Be scared and run away</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Be scared and run away')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene7', 'Think it\'s just a dream')">Think it's just a dream</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Think it\'s just a dream')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 8: Welcoming Momotaro -->
        <div id="scene8" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene8-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene8-previous-question"></div>
                    <div class="japanese-text" id="scene8-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene8-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene8')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene8-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene8-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene8-divider"></div>
            
            <div class="story-text" data-scene="scene8">
                <p><span class="positive-feedback">Perfect!</span> They welcomed Momotaro with open hearts!</p>
                <p>"We always wanted a child," said the old woman happily.</p>
                <p>"You can be our son!" said the old man with tears of joy.</p>
                <p>How should they take care of baby Momotaro?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene8')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene9', 'Love him and raise him well')">Love him and raise him well</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Love him and raise him well')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene8', 'Treat him like a servant')">Treat him like a servant</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Treat him like a servant')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene8', 'Send him to live somewhere else')">Send him to live somewhere else</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Send him to live somewhere else')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 9: Growing Up -->
        <div id="scene9" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene9-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene9-previous-question"></div>
                    <div class="japanese-text" id="scene9-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene9-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene9')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene9-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene9-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene9-divider"></div>
            
            <div class="story-text" data-scene="scene9">
                <p><span class="positive-feedback">Excellent!</span> They loved Momotaro and raised him with great care.</p>
                <p>Momotaro grew up strong, brave, and kind, just like his parents.</p>
                <p>He helped with work and made his parents very proud.</p>
                <p>One day, when Momotaro was grown up, he heard terrible news. What was it?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene9')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene10', 'Evil demons were attacking people')">Evil demons were attacking people</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Evil demons were attacking people')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene9', 'There was no food in the village')">There was no food in the village</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('There was no food in the village')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene9', 'A dragon was sleeping in the mountain')">A dragon was sleeping in the mountain</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A dragon was sleeping in the mountain')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 10: Learning About the Demons -->
        <div id="scene10" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene10-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene10-previous-question"></div>
                    <div class="japanese-text" id="scene10-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene10-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene10')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene10-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene10-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene10-divider"></div>
            
            <div class="story-text" data-scene="scene10">
                <p>That's right! Evil demons from Demon Island were causing trouble!</p>
                <p>They stole treasure, food, and scared all the people in nearby villages.</p>
                <p>"Someone must stop these demons!" said the villagers.</p>
                <p>What should Momotaro do when he hears this?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene10')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene11', 'Decide to fight the demons and help people')">Decide to fight the demons and help people</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Decide to fight the demons and help people')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene10', 'Ignore the problem and stay safe')">Ignore the problem and stay safe</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ignore the problem and stay safe')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene10', 'Move to a different village')">Move to a different village</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Move to a different village')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 11: Making the Decision -->
        <div id="scene11" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene11-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene11-previous-question"></div>
                    <div class="japanese-text" id="scene11-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene11-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene11')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene11-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene11-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene11-divider"></div>
            
            <div class="story-text" data-scene="scene11">
                <p><span class="positive-feedback">Brave choice!</span> Momotaro's heart was full of courage and kindness.</p>
                <p>"I must help the people!" said Momotaro. "I will go to Demon Island!"</p>
                <p>His parents were worried but proud of their son's brave heart.</p>
                <p>What should Momotaro do to prepare for this dangerous journey?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene11')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene12', 'Ask his mother to make special food for the trip')">Ask his mother to make special food for the trip</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ask his mother to make special food for the trip')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene11', 'Leave immediately without any preparation')">Leave immediately without any preparation</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Leave immediately without any preparation')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene11', 'Ask the army to go instead')">Ask the army to go instead</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ask the army to go instead')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 12: Mother's Preparation -->
        <div id="scene12" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene12-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene12-previous-question"></div>
                    <div class="japanese-text" id="scene12-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene12-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene12')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene12-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene12-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene12-divider"></div>
            
            <div class="story-text" data-scene="scene12">
                <p>Smart thinking! Momotaro asked his mother to help him prepare.</p>
                <p>His loving mother made special rice balls with care and love.</p>
                <p>"These rice balls will give you strength," she said with tears in her eyes.</p>
                <p>What else should his parents give him for the journey?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene12')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene13', 'A sword and their blessing')">A sword and their blessing</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A sword and their blessing')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene12', 'A lot of money')">A lot of money</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A lot of money')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene12', 'A map to hide from demons')">A map to hide from demons</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A map to hide from demons')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 13: Parents' Blessing -->
        <div id="scene13" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene13-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene13-previous-question"></div>
                    <div class="japanese-text" id="scene13-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene13-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene13')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene13-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene13-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene13-divider"></div>
            
            <div class="story-text" data-scene="scene13">
                <p><span class="positive-feedback">Perfect!</span> His parents gave him a sword and their loving blessing.</p>
                <p>"Be careful, our dear son," said his father.</p>
                <p>"Come home safely," said his mother.</p>
                <p>Momotaro started his journey to Demon Island. On the way, he met someone. Who was it?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene13')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene14', 'A hungry dog')">A hungry dog</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A hungry dog')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene13', 'A rich merchant')">A rich merchant</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A rich merchant')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene13', 'A wise old wizard')">A wise old wizard</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A wise old wizard')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 14: Meeting the Dog -->
        <div id="scene14" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene14-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene14-previous-question"></div>
                    <div class="japanese-text" id="scene14-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene14-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene14')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene14-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene14-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene14-divider"></div>
            
            <div class="story-text" data-scene="scene14">
                <p>Correct! Momotaro met a hungry dog on the road.</p>
                <p>"Woof! I am so hungry!" said the dog sadly.</p>
                <p>"Please, can you help me? I haven't eaten for days!"</p>
                <p>What should Momotaro do? He only has a few rice balls for his long journey.</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene14')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene15', 'Give the dog a rice ball')">Give the dog a rice ball</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Give the dog a rice ball')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene14', 'Tell the dog to find his own food')">Tell the dog to find his own food</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Tell the dog to find his own food')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene14', 'Ignore the dog and walk away')">Ignore the dog and walk away</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ignore the dog and walk away')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 15: Helping the Dog -->
        <div id="scene15" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene15-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene15-previous-question"></div>
                    <div class="japanese-text" id="scene15-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene15-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene15')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene15-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene15-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene15-divider"></div>
            
            <div class="story-text" data-scene="scene15">
                <p><span class="positive-feedback">Wonderful!</span> Momotaro shared his rice ball with the hungry dog.</p>
                <p>"Thank you so much!" said the dog happily. "You are so kind!"</p>
                <p>"Where are you going?" asked the dog after eating.</p>
                <p>How should Momotaro answer?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene15')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene16', 'Tell the dog about his mission to fight demons')">Tell the dog about his mission to fight demons</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Tell the dog about his mission to fight demons')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene15', 'Keep his mission secret')">Keep his mission secret</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Keep his mission secret')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene15', 'Lie and say he\'s just traveling')">Lie and say he's just traveling</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Lie and say he\'s just traveling')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 16: Dog's Decision -->
        <div id="scene16" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene16-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene16-previous-question"></div>
                    <div class="japanese-text" id="scene16-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene16-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene16')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene16-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene16-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene16-divider"></div>
            
            <div class="story-text" data-scene="scene16">
                <p>Honest and brave! Momotaro told the dog about his important mission.</p>
                <p>"I'm going to Demon Island to stop the evil demons!" said Momotaro.</p>
                <p>"That sounds dangerous!" said the dog. "You helped me, so I want to help you too!"</p>
                <p>What should Momotaro say to the dog's offer?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene16')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene17', 'Accept the dog\'s help gratefully')">Accept the dog's help gratefully</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Accept the dog\'s help gratefully')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene16', 'Say it\'s too dangerous for the dog')">Say it's too dangerous for the dog</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Say it\'s too dangerous for the dog')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene16', 'Tell the dog he\'s not strong enough')">Tell the dog he's not strong enough</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Tell the dog he\'s not strong enough')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 17: Dog Joins the Team -->
        <div id="scene17" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene17-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene17-previous-question"></div>
                    <div class="japanese-text" id="scene17-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene17-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene17')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene17-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene17-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene17-divider"></div>
            
            <div class="story-text" data-scene="scene17">
                <p>Great decision! Momotaro accepted the dog as his first companion.</p>
                <p>"Thank you, Dog! Together we can help the people!" said Momotaro.</p>
                <p>They walked together and became good friends.</p>
                <p>Soon, they met another animal. What animal did they meet?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene17')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene18', 'A clever monkey')">A clever monkey</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A clever monkey')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene17', 'A strong bear')">A strong bear</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A strong bear')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene17', 'A fast horse')">A fast horse</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A fast horse')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 18: Meeting the Monkey -->
        <div id="scene18" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene18-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene18-previous-question"></div>
                    <div class="japanese-text" id="scene18-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene18-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene18')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene18-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene18-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene18-divider"></div>
            
            <div class="story-text" data-scene="scene18">
                <p>Exactly! They met a clever monkey sitting in a tree.</p>
                <p>"Hello there!" said the monkey. "I can see you're travelers!"</p>
                <p>"I'm very hungry. Do you have any food to share?"</p>
                <p>The dog looked at Momotaro. What should Momotaro do?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene18')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene19', 'Share another rice ball with the monkey')">Share another rice ball with the monkey</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Share another rice ball with the monkey')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene18', 'Save the rice balls for emergencies')">Save the rice balls for emergencies</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Save the rice balls for emergencies')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene18', 'Ask the monkey to earn the food first')">Ask the monkey to earn the food first</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Ask the monkey to earn the food first')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 19: Helping the Monkey -->
        <div id="scene19" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene19-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene19-previous-question"></div>
                    <div class="japanese-text" id="scene19-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene19-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene19')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene19-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene19-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene19-divider"></div>
            
            <div class="story-text" data-scene="scene19">
                <p><span class="positive-feedback">Kind choice!</span> Momotaro shared another precious rice ball.</p>
                <p>"You are so generous!" said the monkey. "What brings you on this journey?"</p>
                <p>Momotaro explained about the evil demons and his mission.</p>
                <p>How should the monkey respond to this story?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene19')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene20', 'Offer to help fight the demons')">Offer to help fight the demons</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Offer to help fight the demons')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene19', 'Wish them luck and stay in the tree')">Wish them luck and stay in the tree</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Wish them luck and stay in the tree')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene19', 'Warn them that it\'s too dangerous')">Warn them that it's too dangerous</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Warn them that it\'s too dangerous')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 20: Monkey Joins -->
        <div id="scene20" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene20-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene20-previous-question"></div>
                    <div class="japanese-text" id="scene20-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene20-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene20')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene20-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene20-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene20-divider"></div>
            
            <div class="story-text" data-scene="scene20">
                <p><span class="positive-feedback">Perfect!</span> The monkey wanted to help too!</p>
                <p>"I'm very clever and can climb anywhere!" said the monkey.</p>
                <p>"We monkeys are also angry at those demons!"</p>
                <p>Now Momotaro had two animal friends. They continued walking and met one more friend. Who was it?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene20')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene21', 'A beautiful pheasant')">A beautiful pheasant</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A beautiful pheasant')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene20', 'A wise turtle')">A wise turtle</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A wise turtle')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene20', 'A strong lion')">A strong lion</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('A strong lion')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 21: Meeting the Pheasant -->
        <div id="scene21" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene21-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene21-previous-question"></div>
                    <div class="japanese-text" id="scene21-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene21-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene21')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene21-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene21-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene21-divider"></div>
            
            <div class="story-text" data-scene="scene21">
                <p>Right! They met a beautiful pheasant with colorful feathers.</p>
                <p>"Good day, travelers!" said the pheasant politely.</p>
                <p>"I couldn't help but overhear your conversation. I'm also hungry..."</p>
                <p>Momotaro looked at his last rice ball. What should he do?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene21')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene22', 'Give his last rice ball to the pheasant')">Give his last rice ball to the pheasant</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Give his last rice ball to the pheasant')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene21', 'Keep the last rice ball for himself')">Keep the last rice ball for himself</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Keep the last rice ball for himself')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene21', 'Split the rice ball into tiny pieces')">Split the rice ball into tiny pieces</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Split the rice ball into tiny pieces')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 22: Final Act of Kindness -->
        <div id="scene22" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene22-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene22-previous-question"></div>
                    <div class="japanese-text" id="scene22-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene22-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene22')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene22-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene22-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene22-divider"></div>
            
            <div class="story-text" data-scene="scene22">
                <p>Incredibly generous! Momotaro gave away his last rice ball!</p>
                <p>The pheasant was so moved by his kindness.</p>
                <p>"You gave me your last food! I must help you!" said the pheasant.</p>
                <p>Now Momotaro had three loyal animal friends. What should they do next?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene22')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene23', 'Head directly to Demon Island')">Head directly to Demon Island</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Head directly to Demon Island')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene22', 'Go back to get more food first')">Go back to get more food first</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Go back to get more food first')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene22', 'Practice fighting together first')">Practice fighting together first</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Practice fighting together first')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 23: Reaching Demon Island -->
        <div id="scene23" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene23-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene23-previous-question"></div>
                    <div class="japanese-text" id="scene23-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene23-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene23')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene23-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene23-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene23-divider"></div>
            
            <div class="story-text" data-scene="scene23">
                <p>Brave decision! They traveled to the scary Demon Island.</p>
                <p>The island was dark and frightening. They could hear demon voices!</p>
                <p>"Look at that big castle!" said the dog. "The demons must be inside!"</p>
                <p>How should they approach this dangerous castle?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene23')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene24', 'Work together as a team')">Work together as a team</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Work together as a team')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene23', 'Let Momotaro go alone')">Let Momotaro go alone</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Let Momotaro go alone')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene23', 'Attack without any plan')">Attack without any plan</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Attack without any plan')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 24: The Battle -->
        <div id="scene24" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene24-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene24-previous-question"></div>
                    <div class="japanese-text" id="scene24-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene24-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene24')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene24-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene24-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene24-divider"></div>
            
            <div class="story-text" data-scene="scene24">
                <p>Excellent teamwork! They made a plan together.</p>
                <p>The dog bit the demons' legs! The monkey jumped on their heads!</p>
                <p>The pheasant flew around and confused them! Momotaro fought with his sword!</p>
                <p>The demons were shocked! "Stop! We give up!" they cried. What should the team do?</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene24')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="selectChoiceAndGoToScene('scene25', 'Listen to what the demons have to say')">Listen to what the demons have to say</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Listen to what the demons have to say')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene24', 'Continue fighting to punish them')">Continue fighting to punish them</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Continue fighting to punish them')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main" onclick="showWrongChoice('scene24', 'Take all their treasure and leave')">Take all their treasure and leave</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Take all their treasure and leave')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <!-- Scene 25: The Resolution -->
        <div id="scene25" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="scene25-explanation" class="choice-explanation hidden">
                <h3>Ââç„ÅÆÂïèÈ°å</h3>
                <div class="previous-question">
                    <div class="english-text" id="scene25-previous-question"></div>
                    <div class="japanese-text" id="scene25-previous-question-translation"></div>
                </div>
                
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="scene25-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('scene25')">üîä</button>
                    </div>
                    <div class="japanese-text" id="scene25-choice-translation"></div>
                </div>
                <div class="explanation-text" id="scene25-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="scene25-divider"></div>
            
            <div class="story-text" data-scene="scene25">
                <p>üéâ Perfect ending! üéâ</p>
                <p>Momotaro listened to the demons with wisdom and kindness.</p>
                <p>"We promise to stop being mean!" said the demon king. "We will return everything we stole!"</p>
                <p>They gave back all the treasure and promised to help people instead of hurting them.</p>
                <p>Momotaro, the dog, monkey, and pheasant returned home as heroes!</p>
                <p>The whole village celebrated their success!</p>
                <p><strong>üèÜ Congratulations! You completed the Extended Momotaro Adventure! üèÜ</strong></p>
                <p>You showed kindness, bravery, and wisdom throughout the journey!</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('scene25')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main restart-btn" onclick="restartGame()">Play Again</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Play Again')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main home-btn" onclick="location.href='index.html'">‚Üê „É´„Éº„É´Ë™¨Êòé„Å´Êàª„Çã</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Return to rules explanation')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>

        <div id="wrong-message" class="scene hidden">
            <!-- Choice explanation area (hidden by default) -->
            <div id="wrong-message-explanation" class="choice-explanation wrong hidden">
                <h3>„ÅÇ„Å™„Åü„ÅåÈÅ∏„Çì„Å†ÈÅ∏ÊäûËÇ¢</h3>
                <div class="choice-display">
                    <div class="english-text">
                        <span id="wrong-message-choice-text"></span>
                        <button class="mini-audio-btn" onclick="playSelectedChoiceAudio('wrong-message')">üîä</button>
                    </div>
                    <div class="japanese-text" id="wrong-message-choice-translation"></div>
                </div>
                <div class="explanation-text" id="wrong-message-choice-explanation"></div>
            </div>
            <div class="section-divider hidden" id="wrong-message-divider"></div>

            <div class="story-text" data-scene="wrong-message">
                <p>üö´ <span class="negative-feedback">Oops!</span> That choice doesn't match the real Momotaro story.</p>
                <p>In the traditional story, Momotaro is brave, kind, and makes good choices.</p>
                <p>Try again and choose the answer that shows kindness and bravery!</p>
            </div>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSceneAudio('wrong-message')">üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü</button>
                <button class="audio-btn" onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="choices">
                <div class="choice-container">
                    <button class="choice-button-main" onclick="goBack()">Try Again</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Try Again')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main restart-btn" onclick="restartGame()">Start Over</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Start Over')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
                <div class="choice-container">
                    <button class="choice-button-main home-btn" onclick="location.href='index.html'">‚Üê „É´„Éº„É´Ë™¨Êòé„Å´Êàª„Çã</button>
                    <button class="choice-audio-btn" onclick="playChoiceAudio('Return to rules explanation')" title="„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆÈü≥Â£∞„ÇíÂÜçÁîü">üîä</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentScene = 'scene1';
        let previousScene = 'scene1';
        let currentSceneNumber = 1;
        const totalScenes = 25;

        function updateProgress() {
            const progressPercentage = (currentSceneNumber / totalScenes) * 100;
            document.getElementById('progress-fill').style.width = progressPercentage + '%';
            document.getElementById('scene-progress').textContent = `Scene ${currentSceneNumber} of ${totalScenes}`;
        }

        // Store selected choice information
        let selectedChoiceInfo = {
            text: '',
            translation: '',
            explanation: ''
        };
        
        // Store previous question information
        let previousQuestionInfo = {
            text: '',
            translation: ''
        };
        
        // Question translations
        const questionTranslations = {
            "One morning, she felt very tired. What should she do?": "„ÅÇ„ÇãÊúù„ÄÅÂΩºÂ•≥„ÅØ„Å®„Å¶„ÇÇÁñ≤„Çå„ÇíÊÑü„Åò„Åæ„Åó„Åü„ÄÇÂΩºÂ•≥„ÅØ„Å©„ÅÜ„Åô„Åπ„Åç„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
            "In the river, she saw something floating in the water. What was it?": "Â∑ù„Åß„ÄÅÂΩºÂ•≥„ÅØÊ∞¥„Å´ÊµÆ„Åã„Çì„Åß„ÅÑ„Çã‰Ωï„Åã„ÇíË¶ã„Åæ„Åó„Åü„ÄÇ„Åù„Çå„ÅØ‰Ωï„Åß„Åó„Åü„ÅãÔºü",
            "What should she do with this amazing peach?": "ÂΩºÂ•≥„ÅØ„Åì„ÅÆÁ¥†Êô¥„Çâ„Åó„ÅÑÊ°É„Çí„Å©„ÅÜ„Åô„Åπ„Åç„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
            "How should she tell him about it?": "ÂΩºÂ•≥„ÅØ„Åù„Çå„Å´„Å§„ÅÑ„Å¶„Å©„ÅÆ„Çà„ÅÜ„Å´‰ºù„Åà„Çã„Åπ„Åç„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
            "Should we eat this beautiful peach together?": "„Åì„ÅÆÁæé„Åó„ÅÑÊ°É„Çí‰∏ÄÁ∑í„Å´È£ü„Åπ„Åæ„Åó„Çá„ÅÜ„ÅãÔºü",
            "What do you think came out of the peach?": "Ê°É„Åã„Çâ‰Ωï„ÅåÂá∫„Å¶„Åç„Åü„Å®ÊÄù„ÅÑ„Åæ„Åô„ÅãÔºü",
            "How should they react to this miracle?": "ÂΩº„Çâ„ÅØ„Åì„ÅÆÂ•áË∑°„Å´„Å©„ÅÜÂèçÂøú„Åô„Åπ„Åç„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
            "What should Momotaro do?": "Ê°ÉÂ§™ÈÉé„ÅØ„Å©„ÅÜ„Åô„Åπ„Åç„Åß„Åó„Çá„ÅÜ„ÅãÔºü"
        };

        // Translation dictionary for choices
        const choiceTranslations = {
            // Scene 1
            "Go to the river anyway to work": {
                translation: "„Å®„Å´„Åã„ÅèÂ∑ù„Å´‰ªï‰∫ã„Çí„Åó„Å´Ë°å„Åè",
                explanation: "„Äåanyway„Äç„ÅØ„Äå„Å®„Å´„Åã„Åè„Äç„Äå„Åù„Çå„Åß„ÇÇ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÄÇÁñ≤„Çå„Å¶„ÅÑ„Å¶„ÇÇ‰ªï‰∫ã„ÇíÁ∂ö„Åë„ÇãÂã§Âãâ„Åï„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            "Stay home and rest all day": {
                translation: "ÂÆ∂„Å´„ÅÑ„Å¶‰∏ÄÊó•‰∏≠‰ºë„ÇÄ",
                explanation: "„Äårest„Äç„ÅØ„Äå‰ºë„ÇÄ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÄÇ„Äåall day„Äç„ÅØ„Äå‰∏ÄÊó•‰∏≠„Äç„Åß„Åô„ÄÇ"
            },
            "Ask someone else to do her work": {
                translation: "‰ªñ„ÅÆË™∞„Åã„Å´ÂΩºÂ•≥„ÅÆ‰ªï‰∫ã„Çí„ÅäÈ°ò„ÅÑ„Åô„Çã",
                explanation: "„Äåask someone else to do„Äç„ÅØ„Äå‰ªñ„ÅÆ‰∫∫„Å´„Äú„Åó„Å¶„ÇÇ„Çâ„ÅÜ„Äç„Å®„ÅÑ„ÅÜË°®Áèæ„Åß„Åô„ÄÇ"
            },
            // Scene 2
            "A big, beautiful peach": {
                translation: "Â§ß„Åç„Åè„Å¶Áæé„Åó„ÅÑÊ°É",
                explanation: "„Äåbeautiful„Äç„ÅØ„ÄåÁæé„Åó„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÄÇÂΩ¢ÂÆπË©û„ÅåË§áÊï∞„ÅÇ„ÇãÊôÇ„ÅØ„Ç´„É≥„Éû„ÅßÂå∫Âàá„Çä„Åæ„Åô„ÄÇ"
            },
            "A wooden box": {
                translation: "Êú®„ÅÆÁÆ±",
                explanation: "„Äåwooden„Äç„ÅØ„ÄåÊú®„Åß„Åß„Åç„Åü„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÅÆÂΩ¢ÂÆπË©û„Åß„Åô„ÄÇ"
            },
            "A golden coin": {
                translation: "ÈáëË≤®",
                explanation: "„Äågolden„Äç„ÅØ„ÄåÈáë„ÅÆ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÄÇ„Äåcoin„Äç„ÅØÁ°¨Ë≤®„Åß„Åô„ÄÇ"
            },
            // Scene 3
            "Catch the peach and take it home": {
                translation: "Ê°É„ÇíÊçï„Åæ„Åà„Å¶ÂÆ∂„Å´ÊåÅ„Å£„Å¶Â∏∞„Çã",
                explanation: "„Äåcatch„Äç„ÅØ„ÄåÊçï„Åæ„Åà„Çã„Äç„ÄÅ„Äåtake it home„Äç„ÅØ„Äå„Åù„Çå„ÇíÂÆ∂„Å´ÊåÅ„Å£„Å¶Â∏∞„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Let it float away": {
                translation: "„Åù„Çå„ÇíÊµÅ„Çå„Å´‰ªª„Åõ„Çã",
                explanation: "„Äålet it float away„Äç„ÅØ„Äå„Åù„Çå„ÅåÊµÅ„Çå„Å¶Ë°å„Åè„ÅÆ„Å´‰ªª„Åõ„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Eat it by the river": {
                translation: "Â∑ù„ÅÆ„Åù„Å∞„Åß„Åù„Çå„ÇíÈ£ü„Åπ„Çã",
                explanation: "„Äåby the river„Äç„ÅØ„ÄåÂ∑ù„ÅÆ„Åù„Å∞„Åß„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÅÆÂ†¥ÊâÄ„ÇíË°®„ÅôË°®Áèæ„Åß„Åô„ÄÇ"
            },
            // Scene 4
            "Tell him about the amazing peach she found": {
                translation: "ÂΩºÂ•≥„ÅåË¶ã„Å§„Åë„ÅüÁ¥†Êô¥„Çâ„Åó„ÅÑÊ°É„Å´„Å§„ÅÑ„Å¶ÂΩº„Å´Ë©±„Åô",
                explanation: "„Äåtell him about„Äç„ÅØ„ÄåÂΩº„Å´„Äú„Å´„Å§„ÅÑ„Å¶Ë©±„Åô„Äç„ÄÅ„Äåamazing„Äç„ÅØ„ÄåÁ¥†Êô¥„Çâ„Åó„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Keep it a secret and hide it": {
                translation: "„Åù„Çå„ÇíÁßòÂØÜ„Å´„Åó„Å¶Èö†„Åô",
                explanation: "„Äåkeep it a secret„Äç„ÅØ„Äå„Åù„Çå„ÇíÁßòÂØÜ„Å´„Åô„Çã„Äç„ÄÅ„Äåhide„Äç„ÅØ„ÄåÈö†„Åô„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Give it to the neighbors instead": {
                translation: "‰ª£„Çè„Çä„Å´ËøëÊâÄ„ÅÆ‰∫∫„Å´„Åù„Çå„Çí„ÅÇ„Åí„Çã",
                explanation: "„Äåinstead„Äç„ÅØ„Äå‰ª£„Çè„Çä„Å´„Äç„ÄÅ„Äåneighbors„Äç„ÅØ„ÄåËøëÊâÄ„ÅÆ‰∫∫„Åü„Å°„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 5
            "Yes, let's eat it together": {
                translation: "„ÅØ„ÅÑ„ÄÅ‰∏ÄÁ∑í„Å´È£ü„Åπ„Åæ„Åó„Çá„ÅÜ",
                explanation: "„Äålet's„Äç„ÅØ„Äå„Äú„Åó„Åæ„Åó„Çá„ÅÜ„Äç„Å®„ÅÑ„ÅÜÊèêÊ°à„ÅÆË°®Áèæ„ÄÇ„Äåtogether„Äç„ÅØ„Äå‰∏ÄÁ∑í„Å´„Äç„Åß„Åô„ÄÇ"
            },
            "No, let's save it for later": {
                translation: "„ÅÑ„ÅÑ„Åà„ÄÅÂæå„ÅÆ„Åü„ÇÅ„Å´„Å®„Å£„Å¶„Åä„Åç„Åæ„Åó„Çá„ÅÜ",
                explanation: "„Äåsave it for later„Äç„ÅØ„ÄåÂæå„ÅÆ„Åü„ÇÅ„Å´„Å®„Å£„Å¶„Åä„Åè„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÅÆ‰æøÂà©„Å™Ë°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Let's sell it at the market": {
                translation: "Â∏ÇÂ†¥„Åß„Åù„Çå„ÇíÂ£≤„Çä„Åæ„Åó„Çá„ÅÜ",
                explanation: "„Äåsell„Äç„ÅØ„ÄåÂ£≤„Çã„Äç„ÄÅ„Äåat the market„Äç„ÅØ„ÄåÂ∏ÇÂ†¥„Åß„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 6
            "A baby boy": {
                translation: "Ëµ§„Å°„ÇÉ„Çì„ÅÆÁî∑„ÅÆÂ≠ê",
                explanation: "„Äåbaby boy„Äç„ÅØ„ÄåÁî∑„ÅÆËµ§„Å°„ÇÉ„Çì„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÄÇÊ°ÉÂ§™ÈÉé„ÅÆË™ïÁîü„Ç∑„Éº„É≥„Åß„Åô„ÄÇ"
            },
            "Gold and jewels": {
                translation: "Èáë„Å®ÂÆùÁü≥",
                explanation: "„Äågold„Äç„ÅØ„ÄåÈáë„Äç„ÄÅ„Äåjewels„Äç„ÅØ„ÄåÂÆùÁü≥„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "A magical bird": {
                translation: "È≠îÊ≥ï„ÅÆÈ≥•",
                explanation: "„Äåmagical„Äç„ÅØ„ÄåÈ≠îÊ≥ï„ÅÆ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÅÆÂΩ¢ÂÆπË©û„Åß„Åô„ÄÇ"
            },
            // Scene 7
            "Welcome him with joy and love": {
                translation: "Âñú„Å≥„Å®ÊÑõ„Çí„ÇÇ„Å£„Å¶ÂΩº„ÇíËøé„Åà„Çã",
                explanation: "„Äåwelcome„Äç„ÅØ„ÄåËøé„Åà„Çã„Äç„ÄÅ„Äåwith joy and love„Äç„ÅØ„ÄåÂñú„Å≥„Å®ÊÑõ„Çí„ÇÇ„Å£„Å¶„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Be scared and run away": {
                translation: "ÊÄñ„Åå„Å£„Å¶ÈÄÉ„ÅíÂá∫„Åô",
                explanation: "„Äåbe scared„Äç„ÅØ„ÄåÊÄñ„Åå„Çã„Äç„ÄÅ„Äårun away„Äç„ÅØ„ÄåÈÄÉ„Åí„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Think it's just a dream": {
                translation: "„Åü„Å†„ÅÆÂ§¢„Å†„Å®ÊÄù„ÅÜ",
                explanation: "„Äåit's just a dream„Äç„ÅØ„Äå„Åù„Çå„ÅØ„Åü„Å†„ÅÆÂ§¢„Å†„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 8
            "Love him and raise him well": {
                translation: "ÂΩº„ÇíÊÑõ„Åó„Å¶Â§ßÂàá„Å´ËÇ≤„Å¶„Çã",
                explanation: "„Äåraise„Äç„ÅØ„ÄåËÇ≤„Å¶„Çã„Äç„ÄÅ„Äåwell„Äç„ÅØ„Äå‰∏äÊâã„Å´„ÄÅÂ§ßÂàá„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Treat him like a servant": {
                translation: "ÂΩº„Çí‰ΩøÁî®‰∫∫„ÅÆ„Çà„ÅÜ„Å´Êâ±„ÅÜ",
                explanation: "„Äåtreat„Äç„ÅØ„ÄåÊâ±„ÅÜ„Äç„ÄÅ„Äålike a servant„Äç„ÅØ„Äå‰ΩøÁî®‰∫∫„ÅÆ„Çà„ÅÜ„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Send him to live somewhere else": {
                translation: "ÂΩº„Çí„Å©„Åì„Åã‰ªñ„ÅÆÂ†¥ÊâÄ„Å´‰Ωè„Åæ„Çè„Åõ„Çã",
                explanation: "„Äåsend him to live„Äç„ÅØ„ÄåÂΩº„Çí‰Ωè„Åæ„Çè„Åõ„Çã„Åü„ÇÅ„Å´ÈÄÅ„Çã„Äç„ÄÅ„Äåsomewhere else„Äç„ÅØ„Äå„Å©„Åì„Åã‰ªñ„ÅÆÂ†¥ÊâÄ„Äç„Åß„Åô„ÄÇ"
            },
            // Scene 9
            "Evil demons were attacking people": {
                translation: "ÊÇ™„ÅÑÈ¨º„Åå‰∫∫„ÄÖ„ÇíÊîªÊíÉ„Åó„Å¶„ÅÑ„Åü",
                explanation: "„Äåevil„Äç„ÅØ„ÄåÊÇ™„ÅÑ„Äç„ÄÅ„Äåattack„Äç„ÅØ„ÄåÊîªÊíÉ„Åô„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇÈÄ≤Ë°åÂΩ¢„ÅßÁ∂ôÁ∂öÁöÑ„Å™Áä∂Ê≥Å„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            "There was no food in the village": {
                translation: "Êùë„Å´È£ü„ÅπÁâ©„Åå„Å™„Åã„Å£„Åü",
                explanation: "„Äåthere was no„Äç„ÅØ„Äå„Äú„Åå„Å™„Åã„Å£„Åü„Äç„Å®„ÅÑ„ÅÜÂ≠òÂú®„ÇíÂê¶ÂÆö„Åô„ÇãË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "A dragon was sleeping in the mountain": {
                translation: "Á´ú„ÅåÂ±±„ÅßÁú†„Å£„Å¶„ÅÑ„Åü",
                explanation: "„Äådragon„Äç„ÅØ„ÄåÁ´ú„Äç„ÄÅÈÅéÂéªÈÄ≤Ë°åÂΩ¢„Åß„ÄåÁú†„Å£„Å¶„ÅÑ„Åü„ÄçÁä∂ÊÖã„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            // Scene 10
            "Decide to fight the demons and help people": {
                translation: "È¨º„Å®Êà¶„Å£„Å¶‰∫∫„ÄÖ„ÇíÂä©„Åë„Çã„Åì„Å®„ÇíÊ±∫„ÇÅ„Çã",
                explanation: "„Äådecide to„Äç„ÅØ„Äå„Äú„Åô„Çã„Åì„Å®„ÇíÊ±∫„ÇÅ„Çã„Äç„ÄÅ„Äåfight„Äç„ÅØ„ÄåÊà¶„ÅÜ„Äç„ÄÅ„Äåhelp„Äç„ÅØ„ÄåÂä©„Åë„Çã„Äç„Åß„Åô„ÄÇ"
            },
            "Ignore the problem and stay safe": {
                translation: "ÂïèÈ°å„ÇíÁÑ°Ë¶ñ„Åó„Å¶ÂÆâÂÖ®„Åß„ÅÑ„Çã",
                explanation: "„Äåignore„Äç„ÅØ„ÄåÁÑ°Ë¶ñ„Åô„Çã„Äç„ÄÅ„Äåstay safe„Äç„ÅØ„ÄåÂÆâÂÖ®„Åß„ÅÑ„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Move to a different village": {
                translation: "ÈÅï„ÅÜÊùë„Å´Âºï„Å£Ë∂ä„Åô",
                explanation: "„Äåmove to„Äç„ÅØ„Äå„Äú„Å´Âºï„Å£Ë∂ä„Åô„Äç„ÄÅ„Äådifferent„Äç„ÅØ„ÄåÈÅï„ÅÜ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 11
            "Ask his mother to make special food for the trip": {
                translation: "ÊóÖ„ÅÆ„Åü„ÇÅ„ÅÆÁâπÂà•„Å™È£ü„ÅπÁâ©„Çí‰Ωú„Å£„Å¶„ÇÇ„Çâ„ÅÜ„Çà„ÅÜÊØç„Å´È†º„ÇÄ",
                explanation: "„Äåask someone to do„Äç„ÅØ„ÄåË™∞„Åã„Å´„Äú„Åó„Å¶„ÇÇ„Çâ„ÅÜ„Äç„ÄÅ„Äåtrip„Äç„ÅØ„ÄåÊóÖ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Leave immediately without any preparation": {
                translation: "‰Ωï„ÅÆÊ∫ñÂÇô„ÇÇ„Å™„Åó„Å´„Åô„Åê„Å´Âá∫Áô∫„Åô„Çã",
                explanation: "„Äåimmediately„Äç„ÅØ„Äå„Åô„Åê„Å´„Äç„ÄÅ„Äåwithout any preparation„Äç„ÅØ„Äå‰Ωï„ÅÆÊ∫ñÂÇô„ÇÇ„Å™„Åó„Å´„Äç„Åß„Åô„ÄÇ"
            },
            "Ask the army to go instead": {
                translation: "‰ª£„Çè„Çä„Å´ËªçÈöä„Å´Ë°å„Å£„Å¶„ÇÇ„Çâ„ÅÜ",
                explanation: "„Äåarmy„Äç„ÅØ„ÄåËªçÈöä„Äç„ÄÅ„Äåinstead„Äç„ÅØ„Äå‰ª£„Çè„Çä„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 12
            "A sword and their blessing": {
                translation: "Ââ£„Å®ÂΩº„Çâ„ÅÆÁ•ùÁ¶è",
                explanation: "„Äåsword„Äç„ÅØ„ÄåÂâ£„Äç„ÄÅ„Äåblessing„Äç„ÅØ„ÄåÁ•ùÁ¶è„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "A lot of money": {
                translation: "„Åü„Åè„Åï„Çì„ÅÆ„ÅäÈáë",
                explanation: "„Äåa lot of„Äç„ÅØ„Äå„Åü„Åè„Åï„Çì„ÅÆ„Äç„Å®„ÅÑ„ÅÜÈáè„ÇíË°®„ÅôË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "A map to hide from demons": {
                translation: "È¨º„Åã„ÇâÈö†„Çå„Çã„Åü„ÇÅ„ÅÆÂú∞Âõ≥",
                explanation: "„Äåhide from„Äç„ÅØ„Äå„Äú„Åã„ÇâÈö†„Çå„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 13
            "A hungry dog": {
                translation: "„ÅäËÖπ„ÇíÁ©∫„Åã„Åõ„ÅüÁä¨",
                explanation: "„Äåhungry„Äç„ÅØ„Äå„ÅäËÖπ„ÇíÁ©∫„Åã„Åõ„Åü„Äç„Å®„ÅÑ„ÅÜÂΩ¢ÂÆπË©û„Åß„Åô„ÄÇ"
            },
            "A rich merchant": {
                translation: "Ë£ïÁ¶è„Å™ÂïÜ‰∫∫",
                explanation: "„Äårich„Äç„ÅØ„ÄåË£ïÁ¶è„Å™„Äç„ÄÅ„Äåmerchant„Äç„ÅØ„ÄåÂïÜ‰∫∫„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "A wise old wizard": {
                translation: "Ë≥¢„ÅÑËÄÅÈ≠îÊ≥ï‰Ωø„ÅÑ",
                explanation: "„Äåwise„Äç„ÅØ„ÄåË≥¢„ÅÑ„Äç„ÄÅ„Äåwizard„Äç„ÅØ„ÄåÈ≠îÊ≥ï‰Ωø„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 14
            "Give the dog a rice ball": {
                translation: "Áä¨„Å´„Åä„Å´„Åé„Çä„Çí„ÅÇ„Åí„Çã",
                explanation: "„Äågive someone something„Äç„ÅØ„ÄåË™∞„Åã„Å´‰Ωï„Åã„Çí„ÅÇ„Åí„Çã„Äç„Å®„ÅÑ„ÅÜÂü∫Êú¨ÁöÑ„Å™Ë°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Tell the dog to find his own food": {
                translation: "Áä¨„Å´Ëá™ÂàÜ„ÅßÈ£ü„ÅπÁâ©„ÇíË¶ã„Å§„Åë„Çã„Çà„ÅÜË®Ä„ÅÜ",
                explanation: "„Äåtell someone to do„Äç„ÅØ„ÄåË™∞„Åã„Å´„Äú„Åô„Çã„Çà„ÅÜË®Ä„ÅÜ„Äç„ÄÅ„Äåhis own„Äç„ÅØ„ÄåÂΩºËá™Ë∫´„ÅÆ„Äç„Åß„Åô„ÄÇ"
            },
            "Ignore the dog and walk away": {
                translation: "Áä¨„ÇíÁÑ°Ë¶ñ„Åó„Å¶Á´ã„Å°Âéª„Çã",
                explanation: "„Äåignore„Äç„ÅØ„ÄåÁÑ°Ë¶ñ„Åô„Çã„Äç„ÄÅ„Äåwalk away„Äç„ÅØ„ÄåÁ´ã„Å°Âéª„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 15
            "Tell the dog about his mission to fight demons": {
                translation: "È¨º„Å®Êà¶„ÅÜ‰ΩøÂëΩ„Å´„Å§„ÅÑ„Å¶Áä¨„Å´Ë©±„Åô",
                explanation: "„Äåmission„Äç„ÅØ„Äå‰ΩøÂëΩ„Äç„ÄÅ„Äåfight demons„Äç„ÅØ„ÄåÈ¨º„Å®Êà¶„ÅÜ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Keep his mission secret": {
                translation: "ÂΩº„ÅÆ‰ΩøÂëΩ„ÇíÁßòÂØÜ„Å´„Åô„Çã",
                explanation: "„Äåkeep something secret„Äç„ÅØ„Äå‰Ωï„Åã„ÇíÁßòÂØÜ„Å´„Åô„Çã„Äç„Å®„ÅÑ„ÅÜË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Lie and say he's just traveling": {
                translation: "Âòò„Çí„Å§„ÅÑ„Å¶„Åü„Å†ÊóÖ„Çí„Åó„Å¶„ÅÑ„Çã„Å†„Åë„Å†„Å®Ë®Ä„ÅÜ",
                explanation: "„Äålie„Äç„ÅØ„ÄåÂòò„Çí„Å§„Åè„Äç„ÄÅ„Äåjust traveling„Äç„ÅØ„Äå„Åü„Å†ÊóÖ„Çí„Åó„Å¶„ÅÑ„Çã„Å†„Åë„Äç„Åß„Åô„ÄÇ"
            },
            // Scene 16
            "Accept the dog's help gratefully": {
                translation: "Áä¨„ÅÆÂä©„Åë„ÇíÊÑüË¨ù„Åó„Å¶Âèó„ÅëÂÖ•„Çå„Çã",
                explanation: "„Äåaccept„Äç„ÅØ„ÄåÂèó„ÅëÂÖ•„Çå„Çã„Äç„ÄÅ„Äågratefully„Äç„ÅØ„ÄåÊÑüË¨ù„Åó„Å¶„Äç„Å®„ÅÑ„ÅÜÂâØË©û„Åß„Åô„ÄÇ"
            },
            "Say it's too dangerous for the dog": {
                translation: "Áä¨„Å´„ÅØÂç±Èô∫„Åô„Åé„Çã„Å®Ë®Ä„ÅÜ",
                explanation: "„Äåtoo dangerous for„Äç„ÅØ„Äå„Äú„Å´„ÅØÂç±Èô∫„Åô„Åé„Çã„Äç„Å®„ÅÑ„ÅÜË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Tell the dog he's not strong enough": {
                translation: "Áä¨„Å´ÂçÅÂàÜÂº∑„Åè„Å™„ÅÑ„Å®Ë®Ä„ÅÜ",
                explanation: "„Äånot strong enough„Äç„ÅØ„ÄåÂçÅÂàÜÂº∑„Åè„Å™„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 17
            "A clever monkey": {
                translation: "Ë≥¢„ÅÑÁåø",
                explanation: "„Äåclever„Äç„ÅØ„ÄåË≥¢„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„ÅÆÂΩ¢ÂÆπË©û„Åß„Åô„ÄÇ"
            },
            "A strong bear": {
                translation: "Âº∑„ÅÑÁÜä",
                explanation: "„Äåstrong„Äç„ÅØ„ÄåÂº∑„ÅÑ„Äç„ÄÅ„Äåbear„Äç„ÅØ„ÄåÁÜä„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "A fast horse": {
                translation: "ÈÄü„ÅÑÈ¶¨",
                explanation: "„Äåfast„Äç„ÅØ„ÄåÈÄü„ÅÑ„Äç„ÄÅ„Äåhorse„Äç„ÅØ„ÄåÈ¶¨„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 18
            "Share another rice ball with the monkey": {
                translation: "Áåø„Å®„ÇÇ„ÅÜ‰∏Ä„Å§„ÅÆ„Åä„Å´„Åé„Çä„ÇíÂàÜ„Åë„Çã",
                explanation: "„Äåshare with„Äç„ÅØ„Äå„Äú„Å®ÂàÜ„Åë„Çã„Äç„ÄÅ„Äåanother„Äç„ÅØ„Äå„ÇÇ„ÅÜ‰∏Ä„Å§„ÅÆ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Save the rice balls for emergencies": {
                translation: "Á∑äÊÄ•ÊôÇ„ÅÆ„Åü„ÇÅ„Å´„Åä„Å´„Åé„Çä„Çí„Å®„Å£„Å¶„Åä„Åè",
                explanation: "„Äåsave for„Äç„ÅØ„Äå„Äú„ÅÆ„Åü„ÇÅ„Å´„Å®„Å£„Å¶„Åä„Åè„Äç„ÄÅ„Äåemergencies„Äç„ÅØ„ÄåÁ∑äÊÄ•‰∫ãÊÖã„Äç„Åß„Åô„ÄÇ"
            },
            "Ask the monkey to earn the food first": {
                translation: "Áåø„Å´„Åæ„ÅöÈ£ü„ÅπÁâ©„ÇíÁ®º„Åê„Çà„ÅÜÈ†º„ÇÄ",
                explanation: "„Äåearn„Äç„ÅØ„ÄåÁ®º„Åê„Äç„ÄÅ„Äåfirst„Äç„ÅØ„Äå„Åæ„Åö„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 19
            "Offer to help fight the demons": {
                translation: "È¨º„Å®Êà¶„ÅÜ„Åì„Å®„ÇíÊâã‰ºù„ÅÜ„Å®Áî≥„ÅóÂá∫„Çã",
                explanation: "„Äåoffer to help„Äç„ÅØ„ÄåÊâã‰ºù„ÅÜ„Åì„Å®„ÇíÁî≥„ÅóÂá∫„Çã„Äç„Å®„ÅÑ„ÅÜË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Wish them luck and stay in the tree": {
                translation: "ÂΩº„Çâ„ÅÆÂπ∏ÈÅã„ÇíÁ•à„Å£„Å¶Êú®„Å´„Å®„Å©„Åæ„Çã",
                explanation: "„Äåwish someone luck„Äç„ÅØ„ÄåË™∞„Åã„ÅÆÂπ∏ÈÅã„ÇíÁ•à„Çã„Äç„ÄÅ„Äåstay„Äç„ÅØ„Äå„Å®„Å©„Åæ„Çã„Äç„Åß„Åô„ÄÇ"
            },
            "Warn them that it's too dangerous": {
                translation: "Âç±Èô∫„Åô„Åé„Çã„Å®ÂΩº„Çâ„Å´Ë≠¶Âëä„Åô„Çã",
                explanation: "„Äåwarn„Äç„ÅØ„ÄåË≠¶Âëä„Åô„Çã„Äç„ÄÅ„Äåit's too dangerous„Äç„ÅØ„ÄåÂç±Èô∫„Åô„Åé„Çã„Äç„Åß„Åô„ÄÇ"
            },
            // Scene 20
            "A beautiful pheasant": {
                translation: "Áæé„Åó„ÅÑ„Ç≠„Ç∏",
                explanation: "„Äåpheasant„Äç„ÅØ„Äå„Ç≠„Ç∏„Äç„Å®„ÅÑ„ÅÜÈ≥•„ÅÆÂêçÂâç„Åß„Åô„ÄÇ"
            },
            "A wise turtle": {
                translation: "Ë≥¢„ÅÑ„Ç´„É°",
                explanation: "„Äåturtle„Äç„ÅØ„Äå„Ç´„É°„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "A strong lion": {
                translation: "Âº∑„ÅÑ„É©„Ç§„Ç™„É≥",
                explanation: "„Äålion„Äç„ÅØ„Äå„É©„Ç§„Ç™„É≥„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 21
            "Give his last rice ball to the pheasant": {
                translation: "ÊúÄÂæå„ÅÆ„Åä„Å´„Åé„Çä„Çí„Ç≠„Ç∏„Å´„ÅÇ„Åí„Çã",
                explanation: "„Äålast„Äç„ÅØ„ÄåÊúÄÂæå„ÅÆ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇÊ°ÉÂ§™ÈÉé„ÅÆÂÑ™„Åó„Åï„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            "Keep the last rice ball for himself": {
                translation: "ÊúÄÂæå„ÅÆ„Åä„Å´„Åé„Çä„ÇíËá™ÂàÜ„ÅÆ„Åü„ÇÅ„Å´„Å®„Å£„Å¶„Åä„Åè",
                explanation: "„Äåfor himself„Äç„ÅØ„ÄåËá™ÂàÜËá™Ë∫´„ÅÆ„Åü„ÇÅ„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Split the rice ball into tiny pieces": {
                translation: "„Åä„Å´„Åé„Çä„ÇíÂ∞è„Åï„Å™„Åã„Åë„Çâ„Å´ÂàÜ„Åë„Çã",
                explanation: "„Äåsplit into„Äç„ÅØ„Äå„Äú„Å´ÂàÜ„Åë„Çã„Äç„ÄÅ„Äåtiny pieces„Äç„ÅØ„ÄåÂ∞è„Åï„Å™„Åã„Åë„Çâ„Äç„Åß„Åô„ÄÇ"
            },
            // Scene 22
            "Head directly to Demon Island": {
                translation: "„Åæ„Å£„Åô„ÅêÈ¨º„É∂Â≥∂„Å´Âêë„Åã„ÅÜ",
                explanation: "„Äåhead to„Äç„ÅØ„Äå„Äú„Å´Âêë„Åã„ÅÜ„Äç„ÄÅ„Äådirectly„Äç„ÅØ„Äå„Åæ„Å£„Åô„Åê„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Go back to get more food first": {
                translation: "„Åæ„ÅöÊõ¥„Å™„ÇãÈ£ü„ÅπÁâ©„ÇíÂæó„Çã„Åü„ÇÅ„Å´Êàª„Çã",
                explanation: "„Äågo back„Äç„ÅØ„ÄåÊàª„Çã„Äç„ÄÅ„Äåget more food„Äç„ÅØ„ÄåÊõ¥„Å™„ÇãÈ£ü„ÅπÁâ©„ÇíÂæó„Çã„Äç„Åß„Åô„ÄÇ"
            },
            "Practice fighting together first": {
                translation: "„Åæ„Åö‰∏ÄÁ∑í„Å´Êà¶„ÅÑ„ÅÆÁ∑¥Áøí„Çí„Åô„Çã",
                explanation: "„Äåpractice„Äç„ÅØ„ÄåÁ∑¥Áøí„Åô„Çã„Äç„ÄÅ„Äåtogether„Äç„ÅØ„Äå‰∏ÄÁ∑í„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 23
            "Work together as a team": {
                translation: "„ÉÅ„Éº„É†„Å®„Åó„Å¶‰∏ÄÁ∑í„Å´ÂÉç„Åè",
                explanation: "„Äåwork together„Äç„ÅØ„Äå‰∏ÄÁ∑í„Å´ÂÉç„Åè„Äç„ÄÅ„Äåas a team„Äç„ÅØ„Äå„ÉÅ„Éº„É†„Å®„Åó„Å¶„Äç„Åß„Åô„ÄÇ"
            },
            "Let Momotaro go alone": {
                translation: "Ê°ÉÂ§™ÈÉé„Çí‰∏Ä‰∫∫„ÅßË°å„Åã„Åõ„Çã",
                explanation: "„Äålet someone go alone„Äç„ÅØ„ÄåË™∞„Åã„Çí‰∏Ä‰∫∫„ÅßË°å„Åã„Åõ„Çã„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            "Attack without any plan": {
                translation: "‰Ωï„ÅÆË®àÁîª„ÇÇ„Å™„Åó„Å´ÊîªÊíÉ„Åô„Çã",
                explanation: "„Äåwithout any plan„Äç„ÅØ„Äå‰Ωï„ÅÆË®àÁîª„ÇÇ„Å™„Åó„Å´„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            },
            // Scene 24
            "Listen to what the demons have to say": {
                translation: "È¨º„Åü„Å°„ÅåË®Ä„ÅÜ„Åì„Å®„ÇíËÅû„Åè",
                explanation: "„Äålisten to what someone has to say„Äç„ÅØ„ÄåË™∞„Åã„ÅåË®Ä„ÅÜ„Åì„Å®„ÇíËÅû„Åè„Äç„Å®„ÅÑ„ÅÜË°®Áèæ„Åß„Åô„ÄÇ"
            },
            "Continue fighting to punish them": {
                translation: "ÂΩº„Çâ„ÇíÁΩ∞„Åô„Çã„Åü„ÇÅ„Å´Êà¶„ÅÑÁ∂ö„Åë„Çã",
                explanation: "„Äåcontinue fighting„Äç„ÅØ„ÄåÊà¶„ÅÑÁ∂ö„Åë„Çã„Äç„ÄÅ„Äåpunish„Äç„ÅØ„ÄåÁΩ∞„Åô„Çã„Äç„Åß„Åô„ÄÇ"
            },
            "Take all their treasure and leave": {
                translation: "ÂΩº„Çâ„ÅÆÂÆùÁâ©„ÇíÂÖ®„Å¶Â•™„Å£„Å¶Á´ã„Å°Âéª„Çã",
                explanation: "„Äåtake all their treasure„Äç„ÅØ„ÄåÂΩº„Çâ„ÅÆÂÆùÁâ©„ÇíÂÖ®„Å¶Â•™„ÅÜ„Äç„Å®„ÅÑ„ÅÜÊÑèÂë≥„Åß„Åô„ÄÇ"
            }
        };

        function goToScene(sceneId, selectedChoice = '') {
            // Hide all scenes first
            const allScenes = document.querySelectorAll('.scene');
            allScenes.forEach(scene => scene.classList.add('hidden'));
            
            // Show new scene
            previousScene = currentScene;
            currentScene = sceneId;
            
            // Update scene number
            if (sceneId.startsWith('scene')) {
                currentSceneNumber = parseInt(sceneId.replace('scene', ''));
                updateProgress();
            }
            
            // Show new scene
            const newSceneElement = document.getElementById(sceneId);
            newSceneElement.classList.remove('hidden');
            
            // Shuffle choices for the new scene
            initializeSceneChoices(sceneId);
            
            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function displayChoiceExplanation(sceneId) {
            // Safe implementation using pre-existing HTML elements
            const explanationDiv = document.getElementById(sceneId + '-explanation');
            const dividerDiv = document.getElementById(sceneId + '-divider');
            const choiceTextSpan = document.getElementById(sceneId + '-choice-text');
            const translationDiv = document.getElementById(sceneId + '-choice-translation');
            const explanationTextDiv = document.getElementById(sceneId + '-choice-explanation');
            
            // Previous question elements
            const previousQuestionDiv = document.getElementById(sceneId + '-previous-question');
            const previousQuestionTranslationDiv = document.getElementById(sceneId + '-previous-question-translation');
            
            // Check if all elements exist (safety check)
            if (!explanationDiv || !choiceTextSpan || !translationDiv || !explanationTextDiv) {
                console.log('Explanation elements not found for ' + sceneId);
                return;
            }
            
            // Populate the choice content safely using textContent
            choiceTextSpan.textContent = selectedChoiceInfo.text;
            translationDiv.textContent = selectedChoiceInfo.translation;
            explanationTextDiv.textContent = selectedChoiceInfo.explanation;
            
            // Populate previous question if elements exist
            if (previousQuestionDiv && previousQuestionTranslationDiv && previousQuestionInfo.text) {
                previousQuestionDiv.textContent = previousQuestionInfo.text;
                previousQuestionTranslationDiv.textContent = previousQuestionInfo.translation;
            }
            
            // Show the explanation elements
            explanationDiv.classList.remove('hidden');
            if (dividerDiv) {
                dividerDiv.classList.remove('hidden');
            }
        }

        function selectChoiceAndGoToScene(nextSceneId, selectedChoice) {
            // Extract previous question from current scene
            const currentSceneElement = document.getElementById(currentScene);
            if (currentSceneElement) {
                const storyTextElement = currentSceneElement.querySelector('.story-text');
                if (storyTextElement) {
                    const paragraphs = storyTextElement.querySelectorAll('p');
                    if (paragraphs.length > 0) {
                        const lastParagraph = paragraphs[paragraphs.length - 1];
                        const questionText = lastParagraph.textContent.trim();
                        
                        // Store previous question info
                        previousQuestionInfo = {
                            text: questionText,
                            translation: questionTranslations[questionText] || '„Åì„ÅÆÂïèÈ°å„ÅÆÁøªË®≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì'
                        };
                    }
                }
            }
            
            // Look up translation and explanation from the dictionary
            const choiceData = choiceTranslations[selectedChoice];
            
            if (choiceData) {
                // Store the selected choice information
                selectedChoiceInfo = {
                    text: selectedChoice,
                    translation: choiceData.translation,
                    explanation: choiceData.explanation
                };
            } else {
                // Fallback if translation not found
                selectedChoiceInfo = {
                    text: selectedChoice,
                    translation: 'ÁøªË®≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì',
                    explanation: '„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆË™¨Êòé„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ'
                };
            }
            
            // Navigate to the next scene
            goToScene(nextSceneId);
            
            // Display the explanation
            displayChoiceExplanation(nextSceneId);
        }

        function playSelectedChoiceAudio(sceneId) {
            if (selectedChoiceInfo && selectedChoiceInfo.text) {
                playChoiceAudio(selectedChoiceInfo.text);
            }
        }

        function showWrongChoice(fromScene, selectedChoice = '') {            
            previousScene = fromScene;
            
            // Look up translation and explanation from the dictionary
            const choiceData = choiceTranslations[selectedChoice];
            
            if (choiceData) {
                // Store the selected choice information
                selectedChoiceInfo = {
                    text: selectedChoice,
                    translation: choiceData.translation,
                    explanation: choiceData.explanation
                };
            } else {
                // Fallback if translation not found
                selectedChoiceInfo = {
                    text: selectedChoice,
                    translation: 'ÁøªË®≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì',
                    explanation: '„Åì„ÅÆÈÅ∏ÊäûËÇ¢„ÅÆË™¨Êòé„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ'
                };
            }
            
            goToScene('wrong-message');
            
            // Display the explanation
            displayChoiceExplanation('wrong-message');
        }

        function goBack() {
            // Simple direct approach
            currentSceneNumber = parseInt(previousScene.replace('scene', ''));
            goToScene(previousScene);
        }

        function restartGame() {
            // Hide all scenes
            const scenes = document.querySelectorAll('.scene');
            scenes.forEach(scene => scene.classList.add('hidden'));
            
            // Show first scene
            currentScene = 'scene1';
            previousScene = 'scene1';
            currentSceneNumber = 1;
            updateProgress();
            document.getElementById('scene1').classList.remove('hidden');
            
            // Shuffle choices for the first scene
            initializeSceneChoices('scene1');
        }

        // Text-to-Speech functionality
        let currentSpeech = null;
        
        function playSceneAudio(sceneId) {
            // Stop any current speech
            stopAudio();
            
            const storyTextDiv = document.querySelector(`[data-scene="${sceneId}"]`);
            if (!storyTextDiv) return;
            
            const paragraphs = storyTextDiv.querySelectorAll('p');
            let textToSpeak = '';
            
            // Combine all paragraph text, removing emojis and special characters for better speech
            paragraphs.forEach(p => {
                let text = p.textContent || p.innerText;
                // Clean text for speech (remove emojis, special symbols)
                text = text.replace(/[üçëüéâüèÜüö´üîä‚èπÔ∏è]/g, '');
                text = text.replace(/[^\w\s.,!?-]/g, '');
                textToSpeak += text + ' ';
            });
            
            if (textToSpeak.trim() === '') return;
            
            // Check if speech synthesis is supported
            if ('speechSynthesis' in window) {
                currentSpeech = new SpeechSynthesisUtterance(textToSpeak);
                
                // Configure speech settings
                currentSpeech.lang = 'en-US';
                currentSpeech.rate = 0.8; // Slightly slower for learning
                currentSpeech.pitch = 1.0;
                currentSpeech.volume = 1.0;
                
                // Visual feedback during speech
                const playButton = document.querySelector(`[onclick="playSceneAudio('${sceneId}')"]`);
                if (playButton) {
                    playButton.classList.add('playing');
                    playButton.innerHTML = 'üîä ÂÜçÁîü‰∏≠...';
                }
                
                // Highlight paragraphs while speaking
                let currentParagraph = 0;
                const highlightNextParagraph = () => {
                    // Remove previous highlight
                    paragraphs.forEach(p => p.classList.remove('reading'));
                    
                    // Highlight current paragraph
                    if (currentParagraph < paragraphs.length) {
                        paragraphs[currentParagraph].classList.add('reading');
                        currentParagraph++;
                    }
                };
                
                // Start highlighting first paragraph
                highlightNextParagraph();
                
                // Estimate time per paragraph for highlighting
                const wordsPerParagraph = textToSpeak.split(' ').length / paragraphs.length;
                const timePerParagraph = (wordsPerParagraph / (currentSpeech.rate * 150)) * 1000; // 150 WPM average
                
                const highlightInterval = setInterval(() => {
                    if (currentParagraph < paragraphs.length) {
                        highlightNextParagraph();
                    } else {
                        clearInterval(highlightInterval);
                    }
                }, timePerParagraph);
                
                // Handle speech end
                currentSpeech.onend = function() {
                    resetAudioButtons();
                    clearInterval(highlightInterval);
                    paragraphs.forEach(p => p.classList.remove('reading'));
                    currentSpeech = null;
                };
                
                // Handle speech error
                currentSpeech.onerror = function() {
                    resetAudioButtons();
                    clearInterval(highlightInterval);
                    paragraphs.forEach(p => p.classList.remove('reading'));
                    currentSpeech = null;
                    alert('Èü≥Â£∞ÂÜçÁîü„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅåÈü≥Â£∞Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ');
                };
                
                // Start speaking
                speechSynthesis.speak(currentSpeech);
            } else {
                alert('Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈü≥Â£∞Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');
            }
        }
        
        function stopAudio() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
            }
            resetAudioButtons();
            // Remove all reading highlights
            document.querySelectorAll('.story-text p').forEach(p => p.classList.remove('reading'));
        }
        
        function resetAudioButtons() {
            document.querySelectorAll('.audio-btn').forEach(btn => {
                if (btn.innerHTML.includes('ÂÜçÁîü‰∏≠') || btn.classList.contains('playing')) {
                    btn.classList.remove('playing');
                    btn.innerHTML = 'üîä Ëã±Ë™ûÈü≥Â£∞„ÇíÂÜçÁîü';
                }
            });
        }

        // Function to play individual choice text
        function playChoiceAudio(choiceText) {
            // Stop any current speech
            stopAudio();
            
            if (!choiceText || choiceText.trim() === '') return;
            
            // Check if speech synthesis is supported
            if ('speechSynthesis' in window) {
                currentSpeech = new SpeechSynthesisUtterance(choiceText);
                
                // Configure speech settings
                currentSpeech.lang = 'en-US';
                currentSpeech.rate = 0.7; // Slower for individual choice pronunciation
                currentSpeech.pitch = 1.0;
                currentSpeech.volume = 1.0;
                
                // Visual feedback during speech
                const clickedButton = event.target;
                if (clickedButton && clickedButton.classList.contains('choice-audio-btn')) {
                    clickedButton.classList.add('playing');
                }
                
                // Handle speech end
                currentSpeech.onend = function() {
                    if (clickedButton && clickedButton.classList.contains('choice-audio-btn')) {
                        clickedButton.classList.remove('playing');
                    }
                    currentSpeech = null;
                };
                
                // Handle speech error
                currentSpeech.onerror = function() {
                    if (clickedButton && clickedButton.classList.contains('choice-audio-btn')) {
                        clickedButton.classList.remove('playing');
                    }
                    currentSpeech = null;
                    alert('Èü≥Â£∞ÂÜçÁîü„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅåÈü≥Â£∞Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ');
                };
                
                // Start speaking
                speechSynthesis.speak(currentSpeech);
            } else {
                alert('Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈü≥Â£∞Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');
            }
        }

        // Choice shuffling functions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function shuffleChoices(sceneId) {
            const scene = document.getElementById(sceneId);
            if (!scene) return;
            
            const choicesContainer = scene.querySelector('.choices');
            if (!choicesContainer) return;
            
            const choiceContainers = Array.from(choicesContainer.querySelectorAll('.choice-container'));
            if (choiceContainers.length > 1) {
                shuffleArray(choiceContainers);
                choiceContainers.forEach(container => {
                    choicesContainer.appendChild(container);
                });
            }
        }

        function initializeSceneChoices(sceneId) {
            // Shuffle choices when scene is displayed
            shuffleChoices(sceneId);
        }

        // Initialize progress on page load and shuffle first scene choices
        updateProgress();
        initializeSceneChoices('scene1');
    </script>
</body>
</html>